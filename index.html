
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Matching game</title>
	<style type="text/css">
		img { position: absolute; top: 0px; left: 0px}
		div { position: absolute; width: 500px; height: 500px; }
		#rightSide { left: 520px;
			border-left: 1px solid black; }
		</style>
	</head>
	<body onload="generateFaces()">

		<h1>Matching game</h1>
		<p>Click on the extra smiling face on the left.</p>
		<div id="leftSide"></div><div id="rightSide"></div>

		<script>

			var numberOfFaces = 5;
			var theLeftSide;
			var theRightSide;
			var theBody;

			var nextLevel = function () {

				removeOld();
				numberOfFaces += 5;
				generateFaces();
			}

			var gameOver = function () {

				alert("Game Over!");
				for (child of theLeftSide.childNodes)
					child.onclick = null;
			}

			function position() {

				randomPosition = Math.random() * 400;
				return Math.floor(randomPosition);
			}

			function generateFaces() {


				theLeftSide = document.getElementById("leftSide");
				theRightSide = document.getElementById("rightSide");

				for (i=0; i<numberOfFaces;i++) {
					var imageNode = document.createElement("IMG");
					imageNode.setAttribute("src", "http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png");
					imageNode.style.top = position() + "px";
					imageNode.style.left = position() + "px";
					imageNode.onclick = gameOver;
					if (i == numberOfFaces - 1) {
						imageNode.onclick = nextLevel;

					}
					theLeftSide.appendChild(imageNode);
				}

				var theImages = theLeftSide.cloneNode(true);
				theImages.removeChild(theImages.lastChild);
				theRightSide.appendChild(theImages);

			}

			function removeOld() {

				while (theLeftSide.firstChild) {
					theLeftSide.removeChild(theLeftSide.firstChild);
				}

				while (theRightSide.firstChild) {
					theRightSide.removeChild(theRightSide.firstChild);
				}
			}


		</script>
	</body>
	</html>
